<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="editRemoveClient.css" />
  <title>Edit Client</title>
</head>

<body>
  <div class="menu-bar">
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="Owner-Booking.html">Appointments</a></li>
        <li><a href="ManageClients.html">Manage Clients</a></li>
        <li><a href="manageAnimals.html">Manage Animals</a></li>
        <li><a href="#">Forms</a></li>
      </ul>
    </nav>
  </div>

  <div class="clientLookUp">
    <h1>Client Search</h1>
    <div class="clientInfo" id="clientInfoBox2">
      <form method="get" action="/clientInfo">
        <label class="FirstName1" for="firstName1">First Name:</label>
        <input required ="text" id="firstname1" class="firstName1" name="firstName1"><br><br>
        <label class="LastName1" for="lastName1">Last Name:</label>
        <input required type="text" id="lastname1" class="lastName1" name="lastName1"><br><br>
        <button type="button" onclick="searchClient()" class="searchInfo">
          Search
        </button>
      </form>
    </div>
  </div>

  <div class="clientResultShow">
    <h1>Client Information</h1>
    <div class="clientInfo1" id="clientInfo2"></div>
  </div>

<!-- Add this form within your client information section -->
<form id="editClientForm" style="display: none;">
  <label for="editFirstName">Edit First Name:</label>
  <input type="text" id="editFirstName" name="editFirstName"><br><br>
  <label for="editLastName">Edit Last Name:</label>
  <input type="text" id="editLastName" name="editLastName"><br><br>
  <label for="editEmail">Edit Email:</label>
  <input type="email" id="editEmail" name="editEmail"><br><br>
  <label for="editPhoneNumber">Edit Phone Number:</label>
  <input type="tel" id="editPhoneNumber" name="editPhoneNumber"><br><br>
  <label for="editUsername">Edit Username:</label>
  <input type="username" id="editUsername" name="editUsername"><br><br>
  <label for="editPassword">Edit Password:</label>
  <input type="password" id="editPassword" name="editPassword"><br><br>
  <button class="saveInfo" onclick="saveClientChanges()">Save Changes</button>
</form>





</body>

<script>
  const client_object = {firstName:"", lastName:"", email:"", phone:"", username:"", password:""};
  async function searchClient() {
    const firstName = document.getElementById("firstname1").value;
    const lastName = document.getElementById("lastname1").value;

    try {
      const response = await fetch(
        `/clientInfo?firstName1=${firstName}&lastName1=${lastName}`,
        {
          method: "GET",
        }
      );

      if (response.ok) {
        const data = await response.json();
        if (data.length === 0) {
          document.getElementById("clientInfo2").innerHTML =
            "No Results Found";
        } else {
          data.forEach((client) => {
            document.getElementById("clientInfo2").innerHTML = `
                        <p>Name: ${client.firstName} ${client.lastName}</p>
                        <p>Email: ${client.email}</p>
                        <p>Phone Number: ${client.phoneNumber}</p>
                        <p>Username: ${client.username}</p>
                        <p>Password: ${client.password}</p>
                        <button class="editInfo" onclick="showEditForm(${JSON.stringify(client)})">Edit Client</button>
                        <button class="removeInfo" onclick="removeClient('${client.username}')">Remove Client</button>
                    `;
          });
        }
      } else {
        document.getElementById("clientInfo2").innerHTML = "No Results Found";
        console.log("Failed to fetch client information");
      }
    } catch (error) {
      console.error(error);
    }

    document.getElementById("firstname1").value = "";
    document.getElementById("lastname1").value = "";
  }
</script>

</html>